
compile-program-ordered := Î»(: global-ctx FContext)(: program AST). (: (
   (let ordered (: LEOF List<AST>))
   (while (non-zero program) (match program (
      ()
      ( (Seq( rst t )) (
         (set ordered (cons( t ordered )))
         (set program rst)
      ))
   )))
   (for-each (g in ordered) (match g (
      ()
      ( (Glb( k_t rhs )) (
         (if (is-open(typeof g)) () (
            (compile-global( global-ctx k rhs ))
         ))
      ))
      ( ASTEOF () )
      ( ASTNil () )
      ( (AType _) () )
      ( (Typedef _) () )
      ( (Meta _) () )
      ( t (
         (let e (compile-expr( global-ctx t 0_i64 Used )))
         (let text (+( (+( (fragment::get( e 'frame_s )) (fragment::get( e 'expression_s )) )) (SAtom '\:\n_s) )))
         (set assemble-global-initializer-section (SCons( (close assemble-global-initializer-section) (close text) )))
      ))
   )))
) Nil);

