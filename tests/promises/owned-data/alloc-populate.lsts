
import lib/std/minimal.lsts;

let u8-data(): Nil = (
   let od = mk-owned-data(type(U8), 5);
   assert( od.occupied == 0 );
   assert( od.capacity == 5 );

   # push is designed to give ownership from caller to callee
   od.push(1);
   assert( od[0] == 1 );
   od.push(2);
   assert( od[1] == 2 );
   od.push(3);
   assert( od[2] == 3 );
   od.push(4);
   assert( od[3] == 4 );
   od.push(5);
   assert( od[4] == 5 );
   assert( od.occupied == 5 );
   assert( od.capacity == 5 );

   # pop is designed to give ownership from callee to caller
   assert( od.pop() == 5 );
   assert( od.pop() == 4 );
   assert( od.pop() == 3 );
   assert( od.pop() == 2 );
   assert( od.pop() == 1 );
   assert( od.occupied == 0 );
   assert( od.capacity == 5 );
   ()
);
