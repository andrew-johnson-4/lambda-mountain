
import lib/std/minimal.lsts;

type A implies MustRetain = {};
type B implies MustRetain = { a: A };

let .retain(x: A): A = (
   print(c"retain A\n");
   x as MustNotRetain
);
let .retain(x: B): B = (
   print(c"retain B\n");
   x as MustNotRetain
);

let a = A() as MustNotRetain;
let b = B(a as MustNotRetain) as MustNotRetain;
b.a;
